{% extends 'base.html' %}
{% block title %}UPBIT AutoTrading · 백테스팅 데이터 기반 AI 전략 분석{% endblock %}
{% block content %}
<div class="container my-4">
  <h2 class="mb-4">백테스팅 데이터 기반 AI 전략 분석</h2>
  <div class="row">
    <!-- 좌측: 분석 자동화 -->
    <div class="col-lg-4">
      <div class="card shadow-sm mb-4">
        <div class="card-head"><i class="bi bi-robot"></i> 분석 자동화</div>
        <div class="card-body">
          <form>
            <div class="mb-3">
              <label class="form-label">테스트 시작</label>
              <input type="datetime-local" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">테스트 종료</label>
              <input type="datetime-local" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">최소 가격(원)</label>
              <input type="number" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">최대 가격(원)</label>
              <input type="number" class="form-control">
            </div>
            <div class="mb-4">
              <label class="form-label">거래량 순위</label>
              <input type="number" class="form-control">
            </div>
            <button type="button" class="btn btn-primary w-100">다운로드 & 분석 실행</button>
          </form>
        </div>
      </div>
    </div>
    <!-- 우측: AI 분석 결과 -->
    <div class="col-lg-8">
      <div class="card shadow-sm mb-4">
        <div class="card-head"><i class="bi bi-bar-chart"></i> AI 분석 결과</div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle text-center bg-white">
              <thead class="table-light">
                <tr>
                  <th rowspan="2">전략명</th>
                  <th colspan="3">실 거래</th>
                  <th colspan="4">AI 전략 분석</th>
                </tr>
                <tr>
                  <th>실행 건수</th>
                  <th>승률</th>
                  <th>수익률</th>
                  <th>실행 건수</th>
                  <th>승률</th>
                  <th>수익률</th>
                  <th>파라미터 적용</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>M-BREAK</td>
                  <td>12</td>
                  <td>110%</td>
                  <td>1.25%</td>
                  <td>15</td>
                  <td>120% ▲10%</td>
                  <td>1.27% ▲0.02%</td>
                  <td><button class="btn btn-outline-success btn-sm">적용</button></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 거래 데이터 분석 -->
  <div class="row">
    <div class="col-lg-4">
      <div class="card shadow-sm mb-4">
        <div class="card-head"><i class="bi bi-funnel"></i> 기준점/필터 선택</div>
        <div class="card-body">
          <form>
            <div class="mb-3">
              <label class="form-label">테스트 시작</label>
              <input type="datetime-local" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">테스트 종료</label>
              <input type="datetime-local" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">최소 가격(원)</label>
              <input type="number" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">최대 가격(원)</label>
              <input type="number" class="form-control">
            </div>
            <div class="mb-3">
              <label class="form-label">거래량 순위</label>
              <input type="number" class="form-control">
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="auto-toggle">
              <label class="form-check-label" for="auto-toggle">자동</label>
            </div>
            <div class="mb-3" id="auto-time" style="display:none;">
              <label class="form-label">분석 시작 시간</label>
              <input type="time" class="form-control">
            </div>
            <button type="button" class="btn btn-primary w-100">데이터 분석</button>
          </form>
        </div>
      </div>
    </div>
    <div class="col-lg-8">
      <div class="card shadow-sm mb-4">
        <div class="card-head"><i class="bi bi-graph-up-arrow"></i> 데이터 분석 결과</div>
        <div class="card-body">
          <h5 class="mb-3">000 기준 분석 결과</h5>
          <div class="row mb-4">
            <div class="col"><div class="p-3 bg-light rounded text-center">KPI 카드</div></div>
          </div>
          <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle text-center bg-white">
              <thead class="table-light">
                <tr>
                  <th>구간/전략/코인</th>
                  <th>실행 건수</th>
                  <th>승률</th>
                  <th>평균수익률</th>
                  <th>최대 손익</th>
                  <th>최소 손익</th>
                  <th>평균보유기간</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="7">데이터 없음</td></tr>
              </tbody>
            </table>
          </div>
          <div class="text-end mt-3">
            <button class="btn btn-outline-secondary btn-sm">결과 다운로드</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function(){
    const toggle = document.getElementById('auto-toggle');
    const box = document.getElementById('auto-time');
    if(toggle){
      toggle.addEventListener('change', ()=>{ box.style.display = toggle.checked ? 'block' : 'none'; });
    }
  });
</script>
{% endblock %}
