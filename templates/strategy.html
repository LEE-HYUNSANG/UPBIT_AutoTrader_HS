{% extends "base.html" %}
{% block content %}
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center">
    <h2 class="fw-bold"><i class="bi bi-kanban-fill me-2"></i>전략 설정</h2>
    <button id="btn-save" class="btn btn-primary">
      <i class="bi bi-save me-1"></i>저장
    </button>
  </div>
  <p class="text-muted mt-1">마지막 저장: <span id="last-saved">—</span></p>

  <table id="tbl-strategy" class="table table-hover align-middle mt-3">
    <thead class="table-light text-center">
      <tr>
        <th class="w-6rem">ON/OFF</th>
        <th class="w-18rem">전략명</th>
        <th>매수 조건</th>
        <th>매도 조건</th>
        <th class="w-8rem">우선순위</th>
        <th class="w-5rem"></th>
      </tr>
    </thead>
    <tbody class="text-center"><!-- JS 가 삽입 --></tbody>
  </table>

  <button id="btn-add" class="btn btn-outline-secondary">
    <i class="bi bi-plus-lg"></i> 전략 추가
  </button>
</div>

<!-- 템플릿 row (JS 가 clone) -->
<template id="row-tpl">
  <tr>
    <td><div class="form-check form-switch m-auto">
          <input class="form-check-input active-toggle" type="checkbox">
        </div></td>
    <td class="text-start">
        <span class="fw-semibold strat-name"></span>
    </td>
    <td>
      <select class="form-select form-select-sm buy-cond">
        <option>공격적</option><option>중도적</option><option>보수적</option>
      </select>
    </td>
    <td>
      <select class="form-select form-select-sm sell-cond">
        <option>공격적</option><option>중도적</option><option>보수적</option>
      </select>
    </td>
    <td>
      <input type="number" min="1" class="form-control form-control-sm priority w-6rem">
    </td>
    <td>
      <button class="btn btn-sm btn-outline-info info-btn"
              data-bs-toggle="tooltip" title="전략 설명 미등록">
        <i class="bi bi-info-circle"></i>
      </button>
    </td>
  </tr>
</template>

<script type="module" src="{{ url_for('static', filename='js/strategy.js') }}"></script>
{% endblock %}
